<a href="https://www.ssw.com.au">
  <img src="https://raw.githubusercontent.com/SSWConsulting/SSW.Rules.Content/main/_docs/images/ssw-banner.png">
</a>

> **Note**  
> This readme was generated by SSW Rules GPT

# SSW Rules GPT ü§ñ

### üìù Project Description

Our project is a GPT Bot that uses OpenAI embeddings to search for matching [SSW Rules](https://www.ssw.com.au/rules), and then feeding the top 10 results back into the ChatGPT API, written in C# and Blazor.

### üíª Installation

Follow these simple steps to install and set up our SSW Rules GPT project:

1. Clone the repository
2. Open the `SSW.Rules.GPT` solution
3. Add the following to your secrets.json file in `src/WebAPI`:
```
{
  "OpenAiApiKey": "{{ OPENAI API KEY }}",
  "ConnectionStrings": {
    "DefaultConnection": "{{ DATABASE CONNECTION STRING }}"
  }
}
```

> **Note**  
> You can find the key and connection string in Keeper

3. Run the WebAPI (https) project
4. Run the WebUI project, and a browser window will open to https://localhost:5002
   
> **Warning**  
> The RulesGPT frontend has been changed from port 5001 to 5002, if you are running Identity Server locally you **must** be running RulesGPT on port 5002.  
> Double check WebUI/launchsettings.json before running the project.

5. Ask SSW Rules GPT a question!

### üíª Installation - Set Multiple Startup Projects
Instead of manually launching the WebUI and WebAPI projects, you can set multiple startup projects in Visual Studio and Rider.  
Read [this rule](https://ssw.com.au/rules/multiple-startup-projects/) to learn how.

### üöÄ Deployment
When code merged into main it will be automatically deployed to staging.
You should test your changes in staging before manually running the production workflow.

Staging Frontend URL: https://ashy-meadow-0a2bad900.3.azurestaticapps.net  
Staging API URL: https://ssw-rulesgpt-api-stage.azurewebsites.net

### üë• Project Contributors

- Calum Simpson ([@calumjs](https://github.com/calumjs))
- Matt Parker ([@MattParkerDev](https://github.com/MattParkerDev))
- Harry Ross ([@Harry-Ross](https://github.com/Harry-Ross))
- Jack Reimers ([@jackreimers](https://github.com/jackreimers))
- Adam Cogan ([@adamcogan](https://github.com/adamcogan))

# Rules Embedder
The Rules Embedder is an Azure Function that runs every time a rule in SSW.Rules.Content is updated.
The function is triggered by a webhook on the Rules content repo and only changed rules are updated.

### üõ§Ô∏è Prerequisites

1. To run the function locally you must have the Azure Functions Core Tools installed
2. To deploy the function to Azure you must have the Azure CLI or Azure Powershell module installed

See [this Microsoft Learn article](https://learn.microsoft.com/en-us/azure/azure-functions/create-first-function-cli-csharp?tabs=windows%2Cazure-cli) for install instructions.

### üíª Installation

Follow these simple steps to install and set up our SSW Rules Embedder project:

1. Clone the repository
2. Open the `SSW.Rules.Embedder` solution
3. Add the following to your secrets.json file in `src/Embedder`:
```
{
    "DATABASE_EMAIL": "{{ DATABASE ACCOUNT EMAIL }}",
    "DATABASE_PASSWORD": "{{ DATABASE ACCOUNT PASSWORD }}",
    "DATABASE_URL": "{{ DATABASE URL }}",
    "DATABASE_KEY": "{{ DATABASE KEY }}",

    "GITHUB_KEY": "{{ GITHUB ACCOUNT KEY }}",
    "OPENAI_KEY": "{{ OPENAI KEY }}"
}
```
4. Open a console and `cd` into `src/Embedder`
5. Run `func start`

### üö¢ Deployment

1. Open a console and `cd` into `src/Embedder`
2. Run `func azure functionapp publish <APP_NAME>` 
